!function(e){var t={};function n(o){if(t[o])return t[o].exports;var l=t[o]={i:o,l:!1,exports:{}};return e[o].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)n.d(o,l,function(t){return e[t]}.bind(null,l));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports={getPlural:e=>e>1?"s":"",isToday:e=>(new Date).getDay()-1===e,isClassNow:(e,t,n)=>new Date(`01/01/1990 ${n}`)>=new Date(`01/01/1990 ${e}`)&&new Date(`01/01/1990 ${n}`)<=new Date(`01/01/1990 ${t}`),isClassApporaching:(e,t)=>{const n=Math.floor((Date.parse(`01/01/1990 ${e}`)-Date.parse(`01/01/1990 ${t}`))/6e4);return n<=20&&n>0},isClassOver:(e,t)=>new Date(`01/01/1990 ${e}`)-new Date(`01/01/1990 ${t}`)<0,fetchCourseCodes:async e=>{fetch("https://itsligo-utils.herokuapp.com/api/allcourses").then(e=>e.json()).then(t=>{console.time("getCourses()"),document.getElementById("loader").style.display="none";const n=document.getElementById("courses-datalist"),o=document.createDocumentFragment();let l;for(let e=0;e<t.length;e+=1)(l=document.createElement("option")).text=t[e].course,l.value=t[e].title||t[e].course,l.setAttribute("data-value",t[e].course),o.append(l);n.append(o),"function"==typeof e&&e(),console.timeEnd("getCourses()")}).catch(e=>{console.error(e)})},getSelectedValue:()=>{const e=document.getElementById("courses").value,t=document.querySelector(`#courses-datalist option[value='${e}']`);return null===t?"":t.dataset.value},alertCheck:()=>{localStorage.getItem("visted")||""===window.location.hash||(localStorage.setItem("visted",!0),document.getElementById("alert").style.display="block")}}},function(e,t,n){"use strict";n.r(t);var o=n(0);const l=(e,t,n,l,a)=>{if(e>t){const d=Math.abs(new Date(`01/01/1990 ${e}`).getTime()-new Date(`01/01/1990 ${t}`).getTime())/6e4;if(d>0){const e=d>=60?`Break: ${d/60} hour${Object(o.getPlural)(d/60)}`:`Break: ${d} minutes`,c=document.createElement("a");c.innerHTML=e,c.className=`list-group-item item font-weight-bold ${Object(o.isToday)(a)&&Object(o.isClassOver)(t,l)?"text-muted":"text-success"}`,n.append(c)}}};function a(e,t,n,a){fetch(`https://itsligo-utils.herokuapp.com/api/timetable/${e}/${t}/${n||""}`).then(e=>e.json()).then(t=>{if(console.time("timetable"),document.getElementById("loader").style.display="none",t.empty)return document.getElementById("timetable-window").style.display="block",document.getElementById("course-title").textContent="No timetable found",void(document.getElementById("courseinfo-direct-link").href=t.url);document.getElementById("courseinfo-direct-link").href=t.url,document.title=`MyTerm | ${decodeURIComponent(e)}`;const n=document.getElementById("timetable");document.getElementById("timetable-window").append(n),document.getElementById("course-title").textContent=decodeURIComponent(e);const d=document.createDocumentFragment();let c,s;const i=document.querySelector("#temp-main"),r=(new Date).toLocaleTimeString("en-GB");let u=document.importNode(i.content,!0);for(let e=0;e<t.data.length-2;e+=1)if(t.data[e].length){let n=0;const m=(u=document.importNode(i.content,!0)).querySelector("#card-main");m.id+=e,u.querySelector("#heading").id+=e;const p=u.querySelector("#header");p.id+=e,p.setAttribute("data-target",`#collapse${e}`),p.setAttribute("aria-controls",`collapse${e}`),p.className+=` ${Object(o.isToday)(e)?"text-danger font-weight-bold":"text-white"}`,p.innerHTML+=t.data[e][0].day,(s=u.querySelector("#collapse")).id+=e;const y=u.querySelector("#class-total-badge");y.id+=e,y.innerHTML=t.data[e].length,y.className+=Object(o.isToday)(e)?" badge-danger":"",d.append(m),s=d.getElementById(`collapse${e}`),Object(o.isToday)(e)&&s.classList.add("show");for(let a=0;a<t.data[e].length;a+=1){const d=t.data[e][a];l(d.startTime,n,s,r,e),c=document.createElement("a");const i=d.name.split("/")[0].replace(/ GD & SD/,""),u=d.room.split(" (")[0],m=document.createElement("p");m.innerHTML=`${d.startTime} - ${d.endTime}<br>${i}<br>\n              ${u.split("-")[0]} - ${u.split("-")[1]}<br>\n              ${d.teacher.replace(",",", ")}`,m.classList.add("mb-0"),c.className="list-group-item item",Object(o.isToday)(e)&&(c.className+=` ${Object(o.isClassNow)(d.startTime,d.endTime,r)?"text-danger font-weight-bold":Object(o.isClassApporaching)(d.startTime,r)?"text-warning":Object(o.isClassOver)(d.endTime,r)?"text-muted":""}`),n=d.endTime,c.append(m),s.appendChild(c)}"function"==typeof a&&a()}n.append(d),console.timeEnd("timetable")}).catch(e=>{document.getElementById("timetable-window").style.display="block",document.getElementById("course-title").text="Invalid course entered",console.error(e)})}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("timetable-window"),t=document.getElementById("select-window"),n=document.getElementById("courses"),l=document.getElementById("searchBtn"),d=document.getElementById("toggleBtn"),c=document.getElementById("timetable"),s=(e,t)=>{e.style.display=!1===t?"none":"block"};if(window.location.hash){t.style.display="none";let n=window.location.hash.substring(1);const l=n.split("-");n=n.replace(/(-\d)/g,""),a(encodeURIComponent(n),l[1]||"0",void 0===l[2]?"":l[2],()=>{s(e,!0),Object(o.alertCheck)()}),Object(o.fetchCourseCodes)()}else Object(o.fetchCourseCodes)(()=>{s(t,!0)});window.history&&window.history.pushState&&(window.onpopstate=(()=>{const{hash:e}=window.location;""===e&&window.location.reload()}));const i=n=>{for(;c.firstChild;)c.removeChild(c.firstChild);s(t,!1),s(e,!0);const l=Object(o.getSelectedValue)();window.location.hash=`#${l}-0${n?`-${n}`:""}`,a(encodeURIComponent(l),0,n||"")},r=()=>{document.title="MyTerm",s(e,!1),s(t,!0),window.history.pushState("",document.title,`${window.location.pathname}`)};n.addEventListener("keyup",t=>{n.value.length<1?(l.disabled=!0,d.disabled=!0):(l.disabled=!1,d.disabled=!1),13!==t.keyCode||l.disabled||"none"!==e.style.display||i()}),document.addEventListener("keyup",t=>{8===t.keyCode&&"block"===e.style.display&&r()}),document.getElementById("searchBtn").addEventListener("click",()=>{i(),Object(o.alertCheck)()},!1),document.getElementById("semOneBtn").addEventListener("click",()=>{i("0"),Object(o.alertCheck)()},!1),document.getElementById("semTwoBtn").addEventListener("click",()=>{i("1"),Object(o.alertCheck)()},!1),document.getElementById("backBtn").addEventListener("click",()=>r(),!1)},!1)}]);